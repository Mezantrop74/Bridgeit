---
---
<!DOCTYPE html>
<html>
     <head>
      <title>BridgeIt  {{ page.title }} </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
      <meta name='apple-itunes-app' content="app-id=727736414, app-argument=icemobile://c=register&amp;r=./index.html"/>
      <link rel="icon" type="image/png" href="favicon.png"/>
      <meta name="apple-mobile-web-app-capable" content="yes" />
      
      <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,600,300,400' rel='stylesheet' type='text/css'/>
      <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
      <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css"/>
      <link rel="stylesheet" href="css/mobile.css" type="text/css" />
      <link rel="stylesheet" href="css/syntax.css" type="text/css" />
      
      <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true&libraries=geometry"></script>
      <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
      <script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
      
      <!-- bridgeit.js UNSTABLE VERSION -->
      <script type="text/javascript" src="http://bridgeit.github.io/bridgeit.js/src/bridgeit.js"></script>
      <!-- bridgeit.js STABLE VERSION 
      <script type="text/javascript" src="http://api.bridgeit.mobi/bridgeit/bridgeit.js"></script -->
      
      <script type="text/javascript" src="javascript/bridgeit-demos.js"></script>

      <!-- APP ICONS -->
      <link rel="apple-touch-icon" href="images/touch-icon-iphone.png"/>
      <link rel="apple-touch-icon" sizes="76x76" href="images/touch-icon-ipad.png"/>
      <link rel="apple-touch-icon" sizes="120x120" href="images/touch-icon-iphone-retina.png"/>
      <link rel="apple-touch-icon" sizes="152x152" href="images/touch-icon-ipad-retina.png"/>
      <link rel="apple-touch-startup-image" href="images/touch-startup-image.png"/>

      <script>
         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

         ga('create', 'UA-45568600-1', 'bridgeit.mobi');
         ga('send', 'pageview');

      </script>
      
   </head>
   <body>
    <div data-role="page" id="home" data-dom-cache="true">  
          <div data-role="header" class="hdr" data-position="fixed" data-id="header">
      
      <h1><span class="bridge-font-color">BridgeIt</span></h1>
  </div>

        <div data-role="content">
    <div id="splash" class="splash" style="display:none">
         <div class="row">
            <p class="banner-text">Easily add native mobile features to your web apps</p>
            <img src="images/banner-image.png"/>
            <a class="get-started" id="getStarted">Try it! <i class="icon-caret-down"></i></a>
            <script type="text/javascript">
               $("#getStarted").click(function() {
                   $(".splash").fadeOut();
                   if(typeof(Storage)!=="undefined"){
                      sessionStorage.setItem('bridgeit.jqmDemo.bannerClosed','true');
                   }
                   setTimeout( function(){ 
                      $(".splash")[0].parentElement.removeChild($(".splash")[0]) 
                    }, 1000);
               });
               if(typeof(Storage)!=="undefined"){
                  var hasClosedBanner = sessionStorage.getItem('bridgeit.jqmDemo.bannerClosed');
                  if( !hasClosedBanner ){
                      document.getElementById('splash').style.display = 'block';
                  } 
               }
               </script>
        </div>
    </div>
    <ul data-role="listview" data-inset="false" id="menu" class="menu" id="menu">
        <li>
          <a href="#camera" data-transition="slide" onclick="$('.splash').fadeOut();">
            <i class="icon-camera"></i>Camera
          </a><i class="icon-chevron-right"></i>
        </li>
        <li>
          <a href="#camcorder" data-transition="slide" onclick="$('.splash').fadeOut();">
            <i class="icon-facetime-video"></i>Camcorder
          </a><i class="icon-chevron-right"></i>
        </li>
       
        <li>
          <a href="#push" data-transition="slide" onclick="$('.splash').fadeOut();">
            <i class="icon-cloud-download"></i>Cloud Push
          </a>
          <i class="icon-chevron-right"></i>
        </li>
    </ul>
  </div>
    <div data-role="footer" data-id="footer" data-position="fixed"> 
      <a href="#" class="icesoft-link" data-role="none">
          <img src="images/icesoft-logo-bw-2x.png"/>
      </a>
    <div class="copyright">&copy;&nbsp;2002-2013 ICEsoft Technologies Inc. All rights reserved.</div>
    <a href="https://github.com/bridgeit" data-role="none"><i class="icon-github"></i></a>
    <a href="https://twitter.com/BridgeItApp" data-role="none"><i class="icon-twitter-sign"></i></a>
    <a href="https://www.facebook.com/bridgeitmobi" data-role="none"><i class="icon-facebook-sign"></i></a>
  </div> 
  </div>
    <div id="getBridgeItPopup" style="opacity: 0;display:none;" class="ui-body-c">
        <a id="closeGetBridgePopup" onclick="closeGetBridgeItPopup();"><i class="icon-remove-sign"></i></a>
        <p>Missing BridgeIt native features..would you like to download the BridgeIt utility app now?</p>
        <a id="appStoreLink" href="http://www.icesoft.org/projects/ICEmobile/containers.jsf"
            class="whiteButton bridgeItBtn" onclick="return closeGetBridgeItPopup();" target="_blank">Download the utility app now</a>
    </div>

    <!-- Camera -->
        <div data-role="page" id="camera">  
          <div data-role="header" class="hdr demo" data-position="fixed" data-id="header">
      <a class="btnBack" href="#home"
        data-transition="slide" data-direction="reverse">
        <i class="icon-chevron-left"></i>
      </a>
      <h1><span class="bridge-font-color">BridgeIt</span></h1>
  </div>

        <div data-role="content">
   <div>
    <h2>Native Camera Access</h2>
    <fieldset class="desc">
        <div class="row"><p class="normalText">Access the native device camera features with a simple line of JavaScript...</p></div>
        <div class="row">
{% highlight javascript %}
bridgeit.camera( 'myId', callback, {postURL: '/upload'});
{% endhighlight %}
        </div>
    </fieldset>
    
    <a id="cameraBtn" type="button" class="btn"
        onclick="bridgeit.camera('cameraBtn','handleCam', {postURL:window.echoHub + '/camera-upload'});">Take a Photo</a>
        
    <fieldset id="currentPhoto">
        <div class="row">
            <img id="photoThumbnail"/>
            <span class="ellipsis" id="currentPhotoDesc" ></span>
        </div>
    </fieldset>
    <fieldset id="images">
    </fieldset>
    <script type="text/javascript">
    //check photo storage and load any existing photos
    var PHOTO_STORE_KEY = 'photos';
    var photos = getStoredPhotos();
    console.log('photos: ' + JSON.stringify(photos));
    if( photos ){
        var photosElem = document.getElementById("images");
        for( var i = 0 ; i < photos.length ; i++ ){
            var row = document.createElement('div');
            row.setAttribute('class','row');
            photosElem.appendChild(row);
            var img = document.createElement('img');
            img.setAttribute('src',  photos[i]);
            row.appendChild(img);
        }
    }

    function handleCam(event)  {
        console.log('handleCam: ' + event);
        var text = event.value;
        if (event.preview)  {
            document.getElementById("photoThumbnail").setAttribute("src", event.preview);
            document.getElementById("currentPhotoDesc").innerHTML = "Last photo taken at " + new Date();
        }
        if (event.response)  {
            var photo = event.response;
            console.log('response: ' + photo);
            var row = document.createElement('div');
            row.setAttribute('class','row');
            var elem = document.getElementById('images');
            elem.insertBefore(row,elem.firstChild);
            row.innerHTML = "<a id='photoLink' class='btn ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c' onclick=\"loadPhoto('" + photo + "');\">Load Photo</a>";
        }
    }
    function loadPhoto(url){
        var photoLink = document.getElementById('photoLink');
        if( photoLink ){
            var parent = photoLink.parentNode;
            parent.removeChild(photoLink);
            var img = document.createElement('img');
            var src = window.echoHub + "/" + url;
            img.setAttribute('src',  src);
            parent.appendChild(img);
            setTimeout(function () {
                storePhoto(src);
            },2000);
        }
    }
    function getStoredPhotos(){
        var serializedPhotos = localStorage[PHOTO_STORE_KEY];
        if( serializedPhotos ){
            return JSON.parse(serializedPhotos);
        }
        else{
            return [];
        }
    }
    function storePhoto(photo){
        console.log('storing photo ' + photo );
        var photos = getStoredPhotos();
        photos.push(photo);
        localStorage[PHOTO_STORE_KEY] = JSON.stringify(photos);
    }
    </script>
</div>
  </div>
    <div data-role="footer" data-id="footer" data-position="fixed"> 
      <a href="#" class="icesoft-link" data-role="none">
          <img src="images/icesoft-logo-bw-2x.png"/>
      </a>
    <div class="copyright">&copy;&nbsp;2002-2013 ICEsoft Technologies Inc. All rights reserved.</div>
    <a href="https://github.com/bridgeit" data-role="none"><i class="icon-github"></i></a>
    <a href="https://twitter.com/BridgeItApp" data-role="none"><i class="icon-twitter-sign"></i></a>
    <a href="https://www.facebook.com/bridgeitmobi" data-role="none"><i class="icon-facebook-sign"></i></a>
  </div> 
  </div>
    <div id="getBridgeItPopup" style="opacity: 0;display:none;" class="ui-body-c">
        <a id="closeGetBridgePopup" onclick="closeGetBridgeItPopup();"><i class="icon-remove-sign"></i></a>
        <p>Missing BridgeIt native features..would you like to download the BridgeIt utility app now?</p>
        <a id="appStoreLink" href="http://www.icesoft.org/projects/ICEmobile/containers.jsf"
            class="whiteButton bridgeItBtn" onclick="return closeGetBridgeItPopup();" target="_blank">Download the utility app now</a>
    </div>

        <!-- Camcorder -->
        <div data-role="page" id="camcorder">  
          <div data-role="header" class="hdr demo" data-position="fixed" data-id="header">
      <a class="btnBack" href="#home" data-dom-cache="true"
        data-transition="slide" data-direction="reverse">
        <i class="icon-chevron-left"></i>
      </a>
      <h1><span class="bridge-font-color">BridgeIt</span></h1>
  </div>

        <div data-role="content">
   <div>
    <h2>Native Video Recording</h2>
    <fieldset class="desc">
        <div class="row"><p class="normalText">Access the native video recording features with a simple line of JavaScript...</p></div>
        <div class="row">
{% highlight javascript %}
bridgeit.camcorder('myId', callback, {postURL: '/upload'});
{% endhighlight %}
        </div>
    </fieldset>
    
    <a id="camcorderBtn" type="button" class="btn"
        onclick="bridgeit.camcorder('camcorderBtn','handleVideo', {postURL: window.echoHub + '/video-upload'});">Record a Video</a>
        
    <fieldset id="videoThumbnailField" style="display:none">
        <div class="row">
            <img id="videoThumbnail"/>
            <span class="ellipsis" id="currentVideoDesc" ></span>
        </div>
    </fieldset>
    
    <fieldset id="videos">
    </fieldset>
    <script type="text/javascript">
    //check storage and load any existing recordings
    var VIDEO_STORE_KEY = 'videos';
    var videos = getStoredVideos();
    console.log('videos: ' + JSON.stringify(videos));
    if( videos ){
        var videosElem = document.getElementById("videos");
        for( var i = 0 ; i < videos.length ; i++ ){
            var row = document.createElement('div');
            row.setAttribute('class','row');
            videosElem.appendChild(row);
            var vid = document.createElement('video');
            vid.setAttribute('src', videos[i]);
            vid.setAttribute('controls', 'controls');
            vid.setAttribute('preload', 'auto');
            vid.setAttribute('type', 'video/mp4');
            vid.setAttribute('webkit-playsinline', 'yes');
            row.appendChild(vid);
        }
    }

    function handleVideo(event)  {
        console.log('handleVideo preview: ' + event.preview);
        if (event.preview)  {
            document.getElementById("videoThumbnail").setAttribute("src", event.preview);
            document.getElementById("currentVideoDesc").innerHTML = "Last video taken at " + new Date();
        }
        console.log('handleVideo response: ' + event.response);
        if (event.response)  {
            var video = event.response;
            var row = document.createElement('div');
            row.setAttribute('class','row');
            var elem = document.getElementById('videos');
            elem.insertBefore(row,elem.firstChild);
            row.innerHTML = "<a class='btn ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c' onclick=\"loadVideo(this,'" + video + "');\">Load Video</a>";
        }
    }
    function loadVideo(videoLink, url){
        if( videoLink ){
            var parent = videoLink.parentNode;
            parent.removeChild(videoLink);
            var vid = document.createElement('video');
            var src = window.echoHub + "/" + url;
            vid.setAttribute('src',  src);
            vid.setAttribute('controls', 'controls');
            vid.setAttribute('preload', 'auto');
            vid.setAttribute('type', 'video/mp4');
            vid.setAttribute('webkit-playsinline', 'yes');
            parent.appendChild(vid);
            setTimeout(function () {
                storeVideo(src);
            },2000);
        }
    }
    function getStoredVideos(){
        var serializedVideos = localStorage[VIDEO_STORE_KEY];
        if( serializedVideos ){
            return JSON.parse(serializedVideos);
        }
        else{
            return [];
        }
    }
    function storeVideo(video){
        console.log('storing video ' + video );
        var videos = getStoredVideos();
        videos.push(video);
        localStorage[VIDEO_STORE_KEY] = JSON.stringify(videos);
    }


    </script>
</div>
</div>
  </div>
    <div data-role="footer" data-id="footer" data-position="fixed"> 
      <a href="#" class="icesoft-link" data-role="none">
          <img src="images/icesoft-logo-bw-2x.png"/>
      </a>
    <div class="copyright">&copy;&nbsp;2002-2013 ICEsoft Technologies Inc. All rights reserved.</div>
    <a href="https://github.com/bridgeit" data-role="none"><i class="icon-github"></i></a>
    <a href="https://twitter.com/BridgeItApp" data-role="none"><i class="icon-twitter-sign"></i></a>
    <a href="https://www.facebook.com/bridgeitmobi" data-role="none"><i class="icon-facebook-sign"></i></a>
  </div> 
  </div>
    <div id="getBridgeItPopup" style="opacity: 0;display:none;" class="ui-body-c">
        <a id="closeGetBridgePopup" onclick="closeGetBridgeItPopup();"><i class="icon-remove-sign"></i></a>
        <p>Missing BridgeIt native features..would you like to download the BridgeIt utility app now?</p>
        <a id="appStoreLink" href="http://www.icesoft.org/projects/ICEmobile/containers.jsf"
            class="whiteButton bridgeItBtn" onclick="return closeGetBridgeItPopup();" target="_blank">Download the utility app now</a>
    </div>

            <!-- Cloud Puush -->
        <div data-role="page" id="push">  
          <div data-role="header" class="hdr demo" data-position="fixed" data-id="header">
      <a class="btnBack" href="#home" data-dom-cache="true"
        data-transition="slide" data-direction="reverse">
        <i class="icon-chevron-left"></i>
      </a>
      <h1><span class="bridge-font-color">BridgeIt</span></h1>
  </div>

        <div data-role="content">
<div>
    <h2>Device Notifications</h2>
    <fieldset class="desc">
        <div class="row"><p class="normalText">Cloud notifications...</p></div>
        <div class="row">
{% highlight javascript %}
bridgeit.push('myPushGroup', 
 {subject: 'subject', 
  detail: 'detail'});
{% endhighlight %}
        </div>
    </fieldset>

    <a id="regBtn" type="button" class="btn"
        onclick="bridgeit.register('_reg', 'handlePushRegistration');">Enable Cloud Push</a>

    <a id="pushBtn" type="button" class="btn"
        onclick="delayedPush();">Push in 10 seconds ...</a>

    <fieldset>
        <div class="row"></div>
    </fieldset>
    <fieldset id="notifications">
    </fieldset>
    <script type="text/javascript">

    if (bridgeit.isRegistered())  {
        document.getElementById('regBtn').style.display = 'none';
    }

    function delayedPush()  {
        bridgeit.push( bridgeit.getId(),
            {subject:'BridgeIt Cloud Push',
            detail:'You have been notified.', delay:10000} );
        updatePushButtonText('Waiting for push...');
    }

    function handlePushRegistration(event)  {
        console.log('handlePushRegistration() called, registered=' + bridgeit.isRegistered());
        if (bridgeit.isRegistered())  {
            document.getElementById('regBtn').style.display = 'none';
        }
    }

    function handlePush()  {
        var now = new Date();
        var outDiv = document.getElementById("notifications");
        var row = document.createElement("div");
        if( hasClassList() )
            row.classList.add('hl');
        outDiv.insertBefore(row, outDiv.firstChild);
            row.innerHTML =
            "<b>You were notified:</b> " + simpleTime();
        window.setTimeout(function() {
            if( hasClassList() )
                row.classList.remove('hl');
        }, 3000);
        updatePushButtonText('Push in 10 seconds ...');
    }

    function updatePushButtonText(text){
        document.getElementById('pushBtn').firstChild.firstChild.innerText = text;
    }

    bridgeit.usePushService( window.pushHub, window.apiKey);
    bridgeit.addPushListener(bridgeit.getId(), 'handlePush');
    
    </script>
</div>
</div>
  </div>
    <div data-role="footer" data-id="footer" data-position="fixed"> 
      <a href="#" class="icesoft-link" data-role="none">
          <img src="images/icesoft-logo-bw-2x.png"/>
      </a>
    <div class="copyright">&copy;&nbsp;2002-2013 ICEsoft Technologies Inc. All rights reserved.</div>
    <a href="https://github.com/bridgeit" data-role="none"><i class="icon-github"></i></a>
    <a href="https://twitter.com/BridgeItApp" data-role="none"><i class="icon-twitter-sign"></i></a>
    <a href="https://www.facebook.com/bridgeitmobi" data-role="none"><i class="icon-facebook-sign"></i></a>
  </div> 
  </div>
    <div id="getBridgeItPopup" style="opacity: 0;display:none;" class="ui-body-c">
        <a id="closeGetBridgePopup" onclick="closeGetBridgeItPopup();"><i class="icon-remove-sign"></i></a>
        <p>Missing BridgeIt native features..would you like to download the BridgeIt utility app now?</p>
        <a id="appStoreLink" href="http://www.icesoft.org/projects/ICEmobile/containers.jsf"
            class="whiteButton bridgeItBtn" onclick="return closeGetBridgeItPopup();" target="_blank">Download the utility app now</a>
    </div>

</body>
</html>

